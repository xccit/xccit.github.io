
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>浅析数据脱敏 | xccitのblog</title>
    <meta name="author" content="CH_ywx" />
    <meta name="description" content="人生如逆旅,我亦是行人" />
    <meta name="keywords" content="" />
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
    />
    <link rel="icon" href="/images/myavatar.jpg" />
    <link rel="preconnect" href="https://s4.zstatic.net" />
<script src="https://s4.zstatic.net/ajax/libs/vue/3.3.7/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<link rel="preconnect" href="https://fonts.googleapis.cn" />
<link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin />
<link
    rel="stylesheet"
    href="https://fonts.googleapis.cn/css2?family=Fira+Code:wght@400;500;600;700&family=Lexend:wght@400;500;600;700;800;900&family=Noto+Sans+SC:wght@400;500;600;700;800;900&display=swap"
/>
<script> const mixins = {}; </script>

<script src="https://polyfill.alicdn.com/v3/polyfill.min.js?features=default"></script>


<script src="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://s4.zstatic.net/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://s4.zstatic.net/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="layout">
        <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存 浏览器默认开启</p>
                    <img src="/images/loading.gif" />
                </div>
            </div>
        </transition>
        <div id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <nav id="desktop-menu">
        <a class="title" href="/">
            <span>XCCITのBLOG</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </nav>
    <nav id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;XCCITのBLOG</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </nav>
</div>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

        <div id="main" :class="loading ? 'into-enter-from': 'into-enter-active'">
            <div class="article">
    <div>
        <h1>浅析数据脱敏</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2024/9/29
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            
            <span class="tag">
                
                <a href="/tags/Java%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7/" style="color: #00bcd4">
                    Java开发技巧
                </a>
            </span>
            
        </span>
        
    </div>
    
    <div class="content" v-pre>
        <h1 id="浅析数据脱敏"><a href="#浅析数据脱敏" class="headerlink" title="浅析数据脱敏"></a>浅析数据脱敏</h1><h2 id="数据脱敏的概念"><a href="#数据脱敏的概念" class="headerlink" title="数据脱敏的概念"></a>数据脱敏的概念</h2><p><strong>数据脱敏是一种保护敏感信息的技术，通过对原始数据进行变换或修改来隐藏敏感信息，从而在非生产环境中安全使用脱敏后的数据</strong>。以下是对数据脱敏概念的具体介绍：</p>
<ol>
<li><strong>基本概念</strong>：数据脱敏，也称为数据去隐私化或数据变形，是对敏感数据进行有策略的修改或替换的过程，旨在防止未经授权的访问或泄露。这种技术通过特定的规则和策略，将敏感信息转换为看似相似但不含真正敏感细节的数据副本，以供开发、测试、分析或培训等非生产环境使用。</li>
<li><strong>主要类型</strong>：静态数据脱敏通常在数据被提取并复制到非生产环境之前完成一次性脱敏处理，适用于数据外发场景，如提供给第三方或用于测试数据库。动态数据脱敏在数据查询过程中实时进行，当用户访问敏感数据时，系统自动对其进行脱敏处理，适用于直接连接生产数据库的场景。</li>
<li><strong>实现方式</strong>：包括使用脚本手动编写代码进行脱敏，以及利用专业的数据脱敏产品进行自动化脱敏，后者能够提高脱敏效率并节省操作时间。</li>
<li><strong>技术手段</strong>：常见的脱敏技术包括数据替换、屏蔽、加密、混淆和伪装等，这些方法可以根据实际业务场景选择，以满足数据一致性和可用性的需求。</li>
<li><strong>应用场景</strong>：数据脱敏广泛应用于金融、医疗、政府等领域，特别是在涉及个人身份信息、联系方式、银行卡信息等敏感数据的处理中。</li>
<li><strong>重要性</strong>：数据脱敏技术的重要性在于它能够在不降低数据价值的前提下，有效保护个人隐私和商业机密不被泄露。随着大数据和云计算的发展，数据脱敏成为了确保数据安全合规的关键措施之一。</li>
</ol>
<p>总的来说，数据脱敏是一种关键的信息安全技术，它通过多种手段和方法，有效地保护了敏感数据的安全，同时也支持了数据的有效利用。在实施数据脱敏时，需要综合考虑数据一致性、可用性和安全性的要求，选择合适的技术和方法来实现最佳的数据保护效果。</p>
<h2 id="数据脱敏的实现方式"><a href="#数据脱敏的实现方式" class="headerlink" title="数据脱敏的实现方式"></a>数据脱敏的实现方式</h2><h3 id="1-前端脱敏"><a href="#1-前端脱敏" class="headerlink" title="1.前端脱敏"></a>1.前端脱敏</h3><ul>
<li>后端返回的数据已经进行了脱敏处理</li>
<li>后端返回的数据没有脱敏处理,前端使用JavaScript等脚本进行脱敏</li>
</ul>
<h3 id="2-后端脱敏"><a href="#2-后端脱敏" class="headerlink" title="2.后端脱敏"></a>2.后端脱敏</h3><ul>
<li>数据存储时直接进行加密处理,例如AES、RSA等对称&#x2F;非对称加密方式</li>
</ul>
<h2 id="前后端脱敏各自的弊端"><a href="#前后端脱敏各自的弊端" class="headerlink" title="前后端脱敏各自的弊端"></a>前后端脱敏各自的弊端</h2><h3 id="1-前端脱敏的弊端"><a href="#1-前端脱敏的弊端" class="headerlink" title="1.前端脱敏的弊端"></a>1.前端脱敏的弊端</h3><h4 id="1-1-安全性不够"><a href="#1-1-安全性不够" class="headerlink" title="1.1 安全性不够"></a>1.1 安全性不够</h4><p>总的来说,数据脱敏就是对一些敏感数据进行保护,不想被用户看到,但是前端接收到的数据为原文的话,即使JS等脚本进行处理,原来的响应结果也不会变,只是页面显示的东西变了而已,没有实际意义。</p>
<h3 id="2-后端脱敏的弊端"><a href="#2-后端脱敏的弊端" class="headerlink" title="2.后端脱敏的弊端"></a>2.后端脱敏的弊端</h3><h4 id="2-1无法模糊检索"><a href="#2-1无法模糊检索" class="headerlink" title="2.1无法模糊检索"></a>2.1无法模糊检索</h4><p>如何理解检索呢?以查询用户信息为例,假如代入一个条件:<code>匹配手机号前三位为177,后四位为0000</code>的用户,假如是精确匹配,比如我就要<code>手机号为17799890000</code>这个用户的信息,那SQL可以是这样的:</p>
<p>假设自定义一个解密函数为<code>deenc(phone varchar(11))</code>,那么SQL为:</p>
<pre><code class="sql">SELECT username,nick_name,birthday,deenc(phone) as phone FROM t_user WHERE phone = &#39;edcXdejhopacahah89avavsaib&#39;;
</code></pre>
<p>其中,<code>edcXdejhopacahah89avavsaib</code>为前端传入的<code>17799890000</code>这条数据在后端被加密算法加密之后的数据,那么精确匹配的话,可以很快查询到这条数据,流程图可以是这样的:</p>
<p><img src="https://fastly.jsdelivr.net/gh/xccit/blog_images/images_resource/image-20240928235655491.png" alt="image-20240928235655491"></p>
<p>但是,精确匹配只需要后端的业务层对前端传过来的数据进行加密,交给dao去数据库精确匹配即可,只需要查询这一条数据,并且将手机号解密后返回给前端,如果是模糊查询呢?比如<code>匹配手机号前三位为177,后四位为0000</code>的用户,那么正常的SQL应该是:</p>
<pre><code class="sql">SELECT username,nick_name,birthday,deenc(phone) as phone FROM t_user WHERE deenc(phone) like &#39;177%0000&#39;;
</code></pre>
<p>首先,需要将所有数据进行解密之后再匹配<code>177%0000</code>,假设数据库中有10000w条数据,那么我们会解密到什么时候呢?这是一道送命题。我们必须在<code>数据安全</code>与<code>用户体验</code>中做出选择。所以在数据脱敏这个问题上,基本上不会有公司做得很好,经过撞库等操作用户敏感信息被泄漏的事情并不少,这里就不点名了,<code>d(懂)d(的)d(都)d(懂)</code></p>
<h2 id="优雅实现数据脱敏"><a href="#优雅实现数据脱敏" class="headerlink" title="优雅实现数据脱敏"></a>优雅实现数据脱敏</h2>
    </div>
    
    
    
    
    
    
    
</div>

            <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2024 xccitのblog
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;CH_ywx
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

        </div>
        
        <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
        </transition>
        
    </div>
    <script src="/js/main.js"></script>
    
    




    
</body>
</html>
